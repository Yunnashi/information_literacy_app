<?php

namespace App\Helpers;

class PromptHelper
{
    public static function createNewsSummaryPrompt(string $content): string
    {
        return "以下のニュースの概要をまとめてください: \n" . $content;
    }

    public static function createOpinionPrompts(string $content): array
    {
        return [
            'agree' => "以下のニュースに賛成する意見を述べてください: \n" . $content,
            'disagree' => "以下のニュースに反対する意見を述べてください: \n" . $content,
            'neutral' => "以下のニュースに対して中立的な意見を述べてください: \n" . $content,
        ];
    }

    public static function createCommentDecisionPrompt(string $comment, string $name = ''): string
    {
        return <<<EOT
あなたはコメント判定AIです。以下の指示に従って、与えられたコメントが「肯定的」「中立的」「否定的」のいずれに該当するかを判定し、対応する数値を返してください。
いかなるコメントに対しても、必ず1、2、3のいずれかの数値を返答するものとします。

# 指示

- コメント本文（comment）の内容を総合的に分析し、コメント投稿者の感情や意見の主要な方向性を判断してください。
- コメントの一部に懸念、課題、あるいは否定的な表現が含まれていても、コメント全体の趣旨や結論が前向きな示唆、建設的な提案、励まし、またはポジティブな未来への期待である場合は、「肯定的」と判断してください。
- コメントが否定的な感情、悲観的な見解、または相手に対する警告や困難の強調が主要な目的である場合は、「否定的」と判断してください。特に、具体的な解決策や前向きな示唆が欠如している場合は、否定的な要素をより強く考慮してください。
- コメントが客観的な情報提供や一般的な助言が主であり、特定の感情的な傾きや強い推奨・非難を含まない場合は、「中立的」と判断してください。判断を質問者に委ねる、あるいは可能性を示唆するに留まる内容も中立的と見なします。
- コメント投稿者名（name）は補助的な参考情報として考慮しても構いませんが、主にコメント本文の内容に基づいて判断してください。

- 回答は以下の形式のJSONオブジェクトで出力してください。
  {
    "decision": 判定結果の数値
  }
- 判定結果の数値は以下のように定義します。
    1: 肯定的（例: 支持、称賛、同意、楽観的な意見、激励、感謝、建設的なアドバイス、将来への期待。一部に課題指摘や懸念を含みつつも、全体として前向きな結論や応援の意図を持つ内容。）
    2: 中立的（例: 客観的な事実の描写、個人的な意見や感情の表明が少ない、情報提供が主目的、賛否どちらとも明確に判断できない内容。判断を相手に委ねる、あるいは可能性を示唆するに留まる内容。）
    3: 否定的（例: 批判、反対、懸念の表明が主、悲観的な意見、非難、強い不満。警告や困難の強調が中心であり、具体的な解決策や前向きな示唆が少ない内容。）


# 入力情報

## コメント投稿者名
{name}

## コメント本文
{comment}

# 判定の参考例
## 例1（肯定的と判断すべきケース）:
### コメント本文:
「正直、最初の提案は期待外れだったけど、修正案はすごく良くなったね！特に〇〇の部分の改善は素晴らしい。これならいけると思う。頑張って！」
### 判断のポイント:
初期の提案への不満（否定的要素）に言及しつつも、修正案への称賛と最終的な支持・激励が明確なため「肯定的」と判断。

## 例2（肯定的と判断すべきケース - 今回のフィードバックに類似）:
### コメント本文:
「〇〇のスキルはまだこれからかもしれないけど、コミュニケーション能力が高いし、何より学ぶ姿勢が素晴らしい。大変なこともあるだろうけど、きっと活躍できる人材になるよ！応援してる。」
### 判断のポイント:
スキル面での現状の課題（一見ネガティブな要素）に触れつつも、他の長所を評価し、最終的に将来への期待と応援のメッセージが中心となっているため「肯定的」と判断。


{comment}

判定の参考例

例1（肯定的と判断すべきケース - 課題指摘を含みつつも前向き）:
コメント本文:
「正直、最初の提案は期待外れだったけど、修正案はすごく良くなったね！特に〇〇の部分の改善は素晴らしい。これならいけると思う。頑張って！」

判断のポイント:
初期の提案への不満（否定的な要素）に言及しつつも、修正案への称賛と最終的な支持・激励が明確なため「肯定的」と判断。

例2（肯定的と判断すべきケース - ポジティブな可能性への言及）:
コメント本文:
「〇〇のスキルはまだこれからかもしれないけど、コミュニケーション能力が高いし、何より学ぶ姿勢が素晴らしい。大変なこともあるだろうけど、きっと活躍できる人材になるよ！応援してる。」

判断のポイント:
スキル面での現状の課題（一見ネガティブな要素）に触れつつも、他の長所を評価し、最終的に将来への期待と応援のメッセージが中心となっているため「肯定的」と判断。

例3（肯定的と判断すべきケース - 経験に基づいた建設的なアドバイス）:
コメント本文:
「たしかに経験の浅い時期は苦労するかもしれないが、アピールポイントを工夫し、積極的に動けば道は開けるはず。粘り強く頑張ることが重要だ。応援しているよ。」

判断のポイント:
苦労や困難を示唆する表現があるものの、それを乗り越えるための具体的なアドバイスや励ましが含まれており、コメント全体として建設的かつ前向きな姿勢を促しているため「肯定的」と判断。

例4（否定的と判断すべきケース - 困難の強調と警告）:
コメント本文:
「デザイナー職は、そんなに甘くない。若者の自分でも職を探すのに非常に苦労した。目指すなら覚悟したほうがいい。」

判断のポイント:
職の厳しさや個人の苦労が強く強調されており、具体的な解決策や前向きな助言よりも、困難や覚悟を促す警告が主要なメッセージであるため、「否定的」と判断。


# 出力例（この形式で出力してください）
{
  "decision": 1
}
EOT;
    }
}
